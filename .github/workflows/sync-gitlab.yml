name: Sync from GitLab

on:
  schedule:
    - cron: '0 9 * * *'  # Her g√ºn 09:00 UTC
  workflow_dispatch:  # Manuel tetikleme

jobs:
  sync:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v3
        with:
          fetch-depth: 0
      
      - name: Configure Git
        run: |
          git config user.name "GitHub Actions"
          git config user.email "actions@github.com"
      
      - name: Add GitLab remote
        run: |
          git remote add gitlab https://gitlab.com/kurtay1/tradedecode.git || true
      
      - name: Fetch from GitLab
        run: git fetch gitlab
      
      - name: Merge GitLab changes
        run: |
          git merge gitlab/main --no-edit || echo "Already up to date"
      
      - name: Push to GitHub
        run: git push origin main
